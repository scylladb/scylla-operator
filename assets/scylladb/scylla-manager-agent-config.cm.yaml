apiVersion: v1
kind: ConfigMap
metadata:
  namespace: "{{ .Namespace }}"
  name: "{{ .Name }}"
data:
  {{ .ScyllaAgentConfigFileName | printf "%q" }}: |
    # ScyllaDB API endpoint configuration based on IP family
    {{- if .Spec.IPFamily }}
    {{- if eq (deref .Spec.IPFamily) "IPv6" }}
    scylla:
      api_address: "::1"
      api_port: 10000
    {{- else }}
    scylla:
      api_address: "127.0.0.1"
      api_port: 10000
    {{- end }}
    {{- else }}
    scylla:
      api_address: "127.0.0.1"
      api_port: 10000
    {{- end }}
    
    # Default ScyllaDB Manager Agent configuration
    # Additional configuration can be provided via customConfigSecretRef
